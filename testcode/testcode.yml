alchemy:
    cfg_version: '1.0'

include: [alchemy]

units:
    testcode.b:
        Greet:
            func: greet
        Add Numbers: 
            func: add
        Mul Numbers: 
            func: mul
        Test: 
            func: test
        Test2:
            func: test2

derivatives:
    Square:
        input:
            num: Integer
        output:
            result: Value of the computation
        units:
            Context:
                a: $num
                b: $num
            Mul Numbers:




flows:
    format-test:
        - cli-positional:
            spec: [who]
        - context:
            varmap:
                who: $input_who
        - format-str:
            varmap:
                who: "Hello {who}"
        - print-context:
            param_list: [sho]
    #====================================
    std_value:
        - Greet:
            name: World
        - Print context:
            param_list: ['@result']
    #====================================
    basic_math:
        - Add Numbers:
        - Mul Numbers:
            a: $result
    #====================================
    math_flow:
        - Context:
            values:
                a: 2
                b: 3
        - $basic_math:
        - Print context:
            param_list: null
    #====================================
    basic_math_cli:
        - CLI positional:
            spec: [filename]
        - Parse yaml file:
            filename: $input_filename
        - $basic_math:
        - Print context:
            param_list: [result]
    #====================================
    dir_list:
        - Command:
            cmd: ls -lrt
        - Print stream:
            stream: $stdout
    #====================================
    loop_test:
        - Loop:
            count: 3
            units:
                - Command:
                    cmd: ls -lrt
                - Print stream:
                    stream: $stdout

    iter:
        - Foreach:
            itemlist: 
                - 
                    a: 1
                    b: 2
                -
                    a: 10
                    b: 20
                -
                    a: 100
                    b: 100 
            varname: n
            units:
                - Export dict:
                    dict_var: $n
                - Add Numbers:
                - Print context:
                    param_list: [result]
